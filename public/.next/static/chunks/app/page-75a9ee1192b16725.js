(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8373:function(e,n,t){Promise.resolve().then(t.bind(t,8749))},8566:function(e,n,t){"use strict";t.d(n,{db:function(){return l}});var a=t(5236),s=t(516),i=t(5735);let r=(0,a.ZF)({apiKey:"AIzaSyBdlTxlns8nZFskTbucHaI72CAO1HZa-z0",authDomain:"cubilete-6182f.firebaseapp.com",databaseURL:"https://cubilete-6182f-default-rtdb.firebaseio.com",projectId:"cubilete-6182f",storageBucket:"cubilete-6182f.appspot.com",messagingSenderId:"903682159191",appId:"1:903682159191:web:063d2b14880fd958a72912"}),l=(0,s.N8)(r);(0,i.v0)(r),(0,s.N8)(r),new i.hJ},8749:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var a=t(7437);t(7138);var s=t(2265),i=t(6463);t(6648);var r=t(9671),l=t.n(r),o=t(8566),u=t(516),c=t(9227),d=t(5618);let p=async(e,n,t)=>{let a=(0,u.iH)(o.db,"games/".concat(e));await (0,u.t8)(a,{maxPlayers:n,numDice:t,totalDice:null,players:{},winner:null,currentTurn:null})},m=()=>Math.random().toString(36).substring(2,8).toUpperCase();var h=()=>{let[e,n]=(0,s.useState)(""),[t,r]=(0,s.useState)(4),[l,h]=(0,s.useState)(5),[x,_]=(0,s.useState)(!1),f=(0,i.useRouter)(),{language:g}=(0,s.useContext)(c.A),{user:b}=(0,d.a)(),j=async()=>{let e=m();n(e),_(!0);try{await p(e,t,l);let n=(0,u.iH)(o.db,"games/".concat(e)),a={name:b.displayName,guess:null,dice:l,isCurrentTurn:!0};await (0,u.Vx)(n,{["players/".concat(b.uid)]:a,actualTotalDice:C(t,l),roundTotalDice:0,currentRound:1,roundInProgress:!0}),f.push("/".concat(e))}catch(e){console.error("Error creating game:",e)}finally{_(!1)}},C=(e,n)=>Array(e).fill(0).reduce(e=>e+Math.floor(Math.random()*n)+1,0),v={es:{generate:"crear c\xf3digo de sala",play:"Jugar",numPlayers:"N\xfamero de jugadores",numDice:"N\xfamero de dados"},en:{generate:"generate room code",play:"Play",numPlayers:"Number of players",numDice:"Number of dice"}};return(0,a.jsx)("div",{children:(0,a.jsxs)("form",{onSubmit:n=>{n.preventDefault(),e&&f.push("/".concat(e))},children:[(0,a.jsx)("p",{children:v[g].numPlayers}),(0,a.jsx)("input",{type:"number",placeholder:v[g].numPlayers,value:t,onChange:e=>r(e.target.value),disabled:x}),(0,a.jsx)("p",{children:v[g].numDice}),(0,a.jsx)("input",{type:"number",placeholder:v[g].numDice,value:l,onChange:e=>h(e.target.value),disabled:x}),(0,a.jsx)("button",{type:"button",onClick:j,disabled:x,children:v[g].play})]})})},x=t(7390),_=t.n(x);let f=()=>{let{language:e,switchLanguage:n}=(0,s.useContext)(c.A);return(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:()=>n("en"),className:"".concat(_().button," ").concat("en"===e?_().disabled:""),disabled:"en"===e,children:"English"}),(0,a.jsx)("button",{onClick:()=>n("es"),className:"".concat(_().button," ").concat("es"===e?_().disabled:""),disabled:"es"===e,children:"Espa\xf1ol"})]})};t(9303);let g=()=>{let{language:e}=(0,s.useContext)(c.A);return(0,a.jsx)("div",{})};var b=t(3920),j=t.n(b),C=()=>{let{handleSignOut:e}=(0,d.a)();return(0,a.jsx)("button",{onClick:e,children:"Sign Out"})},v=()=>{let[e,n]=(0,s.useState)(""),[t,r]=(0,s.useState)(""),l=(0,i.useRouter)(),{user:c}=(0,d.a)(),p=async n=>{if(n.preventDefault(),!e)return;let t=(0,u.iH)(o.db,"games/".concat(e)),a=await (0,u.U2)(t);if(a.exists()){let n=a.val();if(Object.keys(n.players).length>=n.maxPlayers){r("Game is full");return}let t=(0,u.iH)(o.db,"games/".concat(e,"/players/").concat(c.uid)),s={name:c.displayName,guess:null,dice:n.numDice,isCurrentTurn:!1};await (0,u.Vx)(t,s),l.push("/".concat(e))}else r("Game not found")};return(0,a.jsx)("div",{children:(0,a.jsxs)("form",{onSubmit:p,children:[(0,a.jsx)("input",{type:"text",placeholder:"Enter game code",value:e,onChange:e=>{n(e.target.value)}}),(0,a.jsx)("button",{type:"submit",children:"Join Game"}),t&&(0,a.jsx)("p",{children:t})]})})},y=()=>{let[e,n]=(0,s.useState)(!1),[t,i]=(0,s.useState)(!1),r=()=>{n(!e)},l=()=>{i(!t)},{language:o}=(0,s.useContext)(c.A),u={es:{settings:"Configuraci\xf3n",close:"cerrar",play:"Jugar"},en:{settings:"Settings",close:"close",play:"Play"}};return(0,a.jsxs)("div",{className:j().MainCup,children:[(0,a.jsxs)("div",{className:j().cup,children:[(0,a.jsx)("div",{className:j().cupTop}),(0,a.jsx)("div",{className:j().cupMiddle,children:(0,a.jsxs)("div",{className:j().btnContainer,children:[(0,a.jsx)("button",{className:j().btn,onClick:l,children:u[o].play}),(0,a.jsx)("button",{className:j().btn,onClick:r,children:"Settings"})]})}),(0,a.jsx)("div",{className:j().cupBottom})]}),e&&(0,a.jsx)("div",{className:j().popup,children:(0,a.jsxs)("div",{className:j().popupContent,children:[(0,a.jsx)("h2",{children:u[o].settings}),(0,a.jsx)(w,{}),(0,a.jsx)(f,{}),(0,a.jsx)(g,{}),(0,a.jsx)("button",{onClick:r,children:u[o].close}),(0,a.jsx)(C,{})]})}),t&&(0,a.jsx)("div",{className:j().popup,children:(0,a.jsxs)("div",{className:j().popupContent,children:[(0,a.jsx)("button",{className:j().playCloseBtn,onClick:l,children:u[o].close}),(0,a.jsx)(h,{}),(0,a.jsx)(v,{})]})})]})};t(5342);var N=t(5580),k=t.n(N),w=()=>{let{user:e}=(0,d.a)(),n=(null==e?void 0:e.photoURL)||"/images/default-profile.png";return e?(0,a.jsxs)("div",{className:k().profileContainer,children:[(0,a.jsx)("img",{src:n,alt:(null==e?void 0:e.displayName)||"User",className:k().profileImage}),(0,a.jsxs)("div",{className:k().profileInfo,children:[(0,a.jsx)("h2",{children:e.displayName}),(0,a.jsx)("p",{children:e.email})]})]}):(0,a.jsx)("div",{children:"No user logged in"})};function S(){let[e,n]=(0,s.useState)("");return(0,i.useRouter)(),(0,a.jsxs)("main",{className:l().main,children:[(0,a.jsx)("div",{className:l().background}),(0,a.jsx)("div",{className:l().mainBox1}),(0,a.jsxs)("div",{className:l().mainBox2,children:[(0,a.jsx)("div",{className:l().MainCupContainer,children:(0,a.jsx)(y,{})}),(0,a.jsx)("div",{className:l().table})]})]})}t(5735)},5342:function(e,n,t){"use strict";var a=t(7437),s=t(2265),i=t(6463),r=t(5618);n.default=e=>{let{children:n}=e,{user:t,loading:l}=(0,r.a)(),o=(0,i.useRouter)();return((0,s.useEffect)(()=>{l||t||o.push("/login")},[t,l,o]),l)?(0,a.jsx)("div",{children:"Loading..."}):(t||o.push("/login"),(0,a.jsx)(a.Fragment,{children:n}))}},5618:function(e,n,t){"use strict";t.d(n,{AuthProvider:function(){return c},a:function(){return d}});var a=t(7437),s=t(2265),i=t(5735),r=t(516),l=t(8566),o=t(6463);let u=(0,s.createContext)(),c=e=>{let{children:n}=e,[t,c]=(0,s.useState)(null),[d,p]=(0,s.useState)(!0),m=(0,i.v0)(l.app),h=(0,r.N8)(l.app),x=(0,o.useRouter)();(0,s.useEffect)(()=>{let e=(0,i.Aj)(m,async e=>{if(c(e),p(!1),e){let n=(0,r.iH)(h,"users/".concat(e.uid));await (0,r.t8)(n,{displayName:e.displayName,email:e.email,photoURL:e.photoURL}),x.push("/")}});return()=>e()},[m,x,h]);let _=async()=>{try{let e=new i.hJ,n=(await (0,i.rh)(m,e)).user,t=(0,r.iH)(h,"users/".concat(n.uid));await (0,r.t8)(t,{displayName:n.displayName,email:n.email,photoURL:n.photoURL}),c(n),x.push("/")}catch(e){console.error("Error signing in with Google:",e)}},f=async()=>{try{await (0,i.w7)(m),c(null),x.push("/login")}catch(e){console.error("Error signing out:",e)}};return(0,a.jsx)(u.Provider,{value:{user:t,loading:d,signInWithGoogle:_,handleSignOut:f},children:n})},d=()=>(0,s.useContext)(u)},9227:function(e,n,t){"use strict";t.d(n,{A:function(){return i},LanguageProvider:function(){return r}});var a=t(7437),s=t(2265);let i=(0,s.createContext)(),r=e=>{let{children:n}=e,[t,r]=(0,s.useState)("en");return(0,a.jsx)(i.Provider,{value:{language:t,switchLanguage:e=>{r(e)}},children:n})}},9671:function(e){e.exports={main:"page_main__GlU4n",background:"page_background__odxEk",mainBox1:"page_mainBox1__yD5W6",mainBox2:"page_mainBox2__pC6Qm",table:"page_table__71QjM",MainCupContainer:"page_MainCupContainer__Ysp2b"}},7390:function(e){e.exports={button:"switcher_button__zOkW9",disabled:"switcher_disabled__TD_P9"}},3920:function(e){e.exports={MainCup:"mainCup_MainCup__vQzdO",cup:"mainCup_cup__i9BsD",cupTop:"mainCup_cupTop__9knTc",cupMiddle:"mainCup_cupMiddle__hn00N",cupBottom:"mainCup_cupBottom__FPxzf",btnContainer:"mainCup_btnContainer__N_jky",btn:"mainCup_btn__MsfvR",popup:"mainCup_popup__9i82V",popupContent:"mainCup_popupContent__TV_3V",playCloseBtn:"mainCup_playCloseBtn__7hCjy"}},9303:function(){},5580:function(e){e.exports={profileContainer:"UserProfile_profileContainer__yLYsn",profileImage:"UserProfile_profileImage__qy5lT",profileInfo:"UserProfile_profileInfo__WAd_O"}}},function(e){e.O(0,[238,481,208,591,974,971,23,744],function(){return e(e.s=8373)}),_N_E=e.O()}]);